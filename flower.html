<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="flower.css">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet" />
  <link rel="icon" href="img/flowers.png" type="image/x-icon">
  <title>flowers</title>
</head>

<body class="container">
  <div class="romantic-glow"></div>

  <!-- Hi·ªáu ·ª©ng b·∫°ch nguy·ªát quang b√™n tr√°i -->
  <div class="moonlight-effect moonlight-left">
    <div class="moonlight-glow moonlight-glow-1"></div>
    <div class="moonlight-glow moonlight-glow-2"></div>
    <div class="moonlight-glow moonlight-glow-3"></div>
    <div class="moonlight-sparkle moonlight-sparkle-1"></div>
    <div class="moonlight-sparkle moonlight-sparkle-2"></div>
    <div class="moonlight-sparkle moonlight-sparkle-3"></div>
  </div>

  <!-- Hi·ªáu ·ª©ng b·∫°ch nguy·ªát quang b√™n ph·∫£i -->
  <div class="moonlight-effect moonlight-right">
    <div class="moonlight-glow moonlight-glow-1"></div>
    <div class="moonlight-glow moonlight-glow-2"></div>
    <div class="moonlight-glow moonlight-glow-3"></div>
    <div class="moonlight-sparkle moonlight-sparkle-1"></div>
    <div class="moonlight-sparkle moonlight-sparkle-2"></div>
    <div class="moonlight-sparkle moonlight-sparkle-3"></div>
  </div>

  <!-- L√° th∆∞ t·ªè t√¨nh -->
  <div class="letter-container">
    <div class="envlope-wrapper">
      <div id="envelope" class="close">
        <div class="wax-seal"></div>
        <div class="front flap"></div>
        <div class="front pocket"></div>
        <div class="letter">
          <div class="letter-corner corner-tl"></div>
          <div class="letter-corner corner-br"></div>
          <div class="message">
            <div class="lyrics">
              <div id="page1" class="lyric-page active">
                <p>G·ª≠i ch·ªã g√°i tuy·ªát v·ªùi nh·∫•t c·ªßa em,...‚ù§Ô∏è</p>
                <p>Ch√∫c ch·ªã 20-10 vui v·∫ª h·∫°nh ph√∫c b√™n ng∆∞·ªùi ch·ªã y√™u</p>
                <p>(n·∫øu c√≥)</p>
                <p>Ch√∫c ch·ªã m√£i th√†nh c√¥ng trong cu·ªôc s·ªëng, s·ª± nghi·ªáp</p>
                <p>Ch√∫c ch·ªã lu√¥n vui v·∫ª v√† g·∫∑p nhi·ªÅu may m·∫Øn.... -></p>
              </div>
              <div id="page2" class="lyric-page">
                <p>Em c·∫£m ∆°n ch·ªã v√¨ ƒë√£ l√† ch·ªã g√°i c·ªßa em.</p>
                <p>ƒê√£ d·∫°y d·ªó v√† ch·ªãu ƒë·ª±ng em r·∫•t nhi·ªÅu.</p>
                <p>Em n·ª£ ch·ªã r·∫•t nhi·ªÅu, th·∫≠t s·ª± em kh√¥ng bi·∫øt</p>
                <p>m√¨nh c√≥ th·ªÉ tr·∫£ l·∫°i cho ch·ªã nh·ªØng g√¨.</p>
                <p>Nh∆∞ng em v·∫´n c·ªë g·∫Øng ƒë·ªÉ ƒë∆∞·ª£c nh∆∞ ch·ªã...</p>
              </div>
              <div id="page3" class="lyric-page">
                <p>Em mong nh·ªØng th·ª© t·ªët ƒë·∫πp nh·∫•t s·∫Ω ƒë·∫øn ch·ªã.</p>
                <p>V√¨ ƒë√≥ l√† nh·ªØng th·ª© ch·ªã x·ª©ng ƒë√°ng c√≥.</p>
                <p>Em bi·∫øt trong cu·ªôc ƒë·ªùi ch·ªã ƒë√£ c√≥ nh·ªØng b·∫•t c√¥ng.</p>
                <p>Em hy v·ªçng ƒëi·ªÅu ƒë√≥ kh√¥ng khi·∫øn ch·ªã ph·∫£i bu·ªìn.</p>
                <p>H√£y c·ªë g·∫Øng t∆∞∆°i c∆∞·ªùi nh·∫•t c√≥ th·ªÉ,...</p>
              </div>
              <div id="page4" class="lyric-page">
                <p>Ch·ªã m√£i l√† ng∆∞·ªùi em h√¢m m·ªô nh·∫•t trong ƒë·ªùi.</p>
                <p>C·∫£m ∆°n ch·ªã v√¨ ƒë√£ gi√∫p ƒë·ª° em nhi·ªÅu ƒë·∫øn v·∫≠y.</p>
                <p>Em s·∫Ω c·ªë g·∫Øng ƒë·ªÉ ƒë∆∞·ª£c m·ªôt ph·∫ßn nh∆∞ ch·ªã.</p>
                <p>Cu·ªëi c√πng, ch√∫c ch·ªã t√¨m ƒë∆∞·ª£c b·∫øn ƒë·ªó cho m√¨nh.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="controls">
      <button id="openBtn">M·ªü</button>
      <button id="resetBtn" style="display: none;">ƒê√≥ng</button>
    </div>
  </div>

  <!-- H·ªôp qu√† b√™n tr√°i -->
  <div class="gift-box gift-left">
    <div class="box">
      <div class="box-body">
        <div class="box-lid">
          <div class="box-bowtie"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- H·ªôp qu√† b√™n ph·∫£i -->
  <div class="gift-box gift-right">
    <div class="box">
      <div class="box-body">
        <div class="box-lid">
          <div class="box-bowtie"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ·∫¢nh b·∫•t ng·ªù b√™n tr√°i -->
  <img id="gift-image-left" src="20-10img/474949615_122206495766238976_5055720230004883306_n.jpg" alt="·∫¢nh b·∫•t ng·ªù 1" style="display: none;">

  <!-- ·∫¢nh b·∫•t ng·ªù b√™n ph·∫£i -->
  <img id="gift-image-right" src="20-10img/Screenshot 2025-10-20 124642.png" alt="·∫¢nh b·∫•t ng·ªù 2" style="display: none;">


  <script>
    onload = () => {
      document.body.classList.remove("container");
    };

    // Ch·ªâ redirect v·ªÅ matrix khi th·ª±c s·ª± l√† refresh th·ªß c√¥ng
    const matrixRedirect = sessionStorage.getItem('matrixRedirect');

    if (matrixRedirect === 'true') {
      // ƒê√¢y l√† auto redirect h·ª£p l·ªá t·ª´ matrix
      console.log('üå∏ Coming from matrix, staying on flower page');
      sessionStorage.removeItem('matrixRedirect'); // X√≥a flag
    } else {
      // ƒê√¢y l√† refresh th·ªß c√¥ng ho·∫∑c truy c·∫≠p tr·ª±c ti·∫øp
      console.log('üîÑ Manual refresh/access detected, redirecting to matrix...');
      window.location.href = 'matrix-pro.html';
    }
  </script>

  <!-- JavaScript cho l√° th∆∞ -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function () {
      const envelope = $('#envelope');
      const openBtn = $("#openBtn");
      const resetBtn = $("#resetBtn");
      const giftLeft = $('.gift-left');
      const giftRight = $('.gift-right');

      let currentPage = 1;
      const totalPages = 4;
      let isOpen = false;

      // T·ª± ƒë·ªông k√≠ch ho·∫°t hi·ªáu ·ª©ng n·ªï h·ªôp qu√† sau khi h·∫° c√°nh
      setTimeout(function () {
        $('.gift-left').addClass('impacted');
        $('.gift-right').addClass('impacted');
      }, 4000); // 6s (delay) + 1.2s (animation) = 7.2s

      // M·ªü n·∫Øp h·ªôp qu√† v√† hi·ªÉn th·ªã ·∫£nh sau khi ch·∫°m ƒë·∫•t
      setTimeout(function () {
        $('.gift-left .box-lid').addClass('lid-open');
        $('.gift-right .box-lid').addClass('lid-open');
        $('#gift-image-left').show().addClass('show');
        $('#gift-image-right').show().addClass('show');
      }, 4000); // 7.2s + 0.3s = 7.5s

      // L√†m h·ªôp qu√† bi·∫øn m·∫•t sau khi hi·ªÉn th·ªã ·∫£nh
      setTimeout(function () {
        $('.gift-left').addClass('disappearing');
        $('.gift-right').addClass('disappearing');
      }, 5000); // 7.5s + 1s (hi·ªÉn th·ªã ·∫£nh) = 8.5s

      envelope.on('click', function () {
        if (isOpen) nextLyric();
      });

      openBtn.on('click', function () {
        envelope.removeClass("close").addClass("open");
        isOpen = true;
        openBtn.hide();
        resetBtn.show();
      });

      resetBtn.on('click', function () {
        envelope.removeClass("open").addClass("close animating");
        isOpen = false;
        setTimeout(function () {
          envelope.removeClass("animating");
          currentPage = 1;
          updateActivePage();
          resetBtn.hide();
          openBtn.show();
        }, 2000);
      });

      function nextLyric() {
        currentPage = currentPage < totalPages ? currentPage + 1 : 1;
        updateActivePage();
      }

      function updateActivePage() {
        $(".lyric-page").removeClass("active");
        $("#page" + currentPage).addClass("active");
      }
    });
  </script>
</body>

</html>